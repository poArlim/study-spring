# Web 기본

## REST API 

REST API(RESTful API) 는 REST 아키텍처의 제약 조건을 준수하는 에플리케이션 프로그래밍 인터페이스를 말한다. REST 란 Representational State Transfer 의 줄임말로, 네트워크 아키텍쳐 원칙의 모음이다.

### REST 

- Client, Server : 클라이언트와 서버가 서로 독립적으로 분리되어 있어야 한다.
- Stateless : 요청에 대해서 클라이언트의 상태를 서버에 저장하지 않는다.
- Cache : 클라이언트는 서버의 응답을 Cache(임시저장) 할 수 있어야 한다. 클라이언트가 Cache를 통해서 응답을 재사용할 수 있어야 하며, 이를 통해 서버의 부하를 낮춘다.
- Layered System(계층화) : 서버와 클라이언트 사이에 방화벽, 게이트웨이, Proxy 등 다양한 계층 형태로 구성이 가능해야 하며, 이를 확장할 수 있어야 한다.
- 인터페이스 일관성 : 인터페이스의 일관성을 지키고, 아키텍처를 단순화시켜 작은 단위로 분리하여 클라이언트, 서버가 독립적으로 개선될 수 있어야 한다.
- Code on Demand(Optional) : 자바 애플릿, 자바스크립트, 플래시 등 특정한 기능을 서버로부터 클라이언트가 전달받아 코드를 실행할 수 있어야 한다.
- ...


### RESTful

다음의 인터페이스 일관성이 잘 지켜졌는지에 따라 REST 를 잘 사용했는지 판단을 할 수 있으며, 조건들이 잘 갖춰진 경우 RESTful 하다고 표현하며 이를 REST API 라고 부른다.

+ 자원의 식별
  - 웹 기반의 REST 에서는 리소스 접근을 할 때 URI 를 사용한다.
    - URI (Uniform Resource Identifier) : 인터넷 상에서 특정 자원을 나타내는 유일한 식별값.(응답은 달라질 수 있다.)
    - URL (Uniform Resource Locator) : 인터넷 상에서 자원, 특정 파일이 어디에 위치하는지 식별하는 주소 (URI 의 하위 개념)

  - URI 설계 원칙
    - 슬래시(/) 는 계층 관계를 나타내는 데 사용한다.
    - URI 마지막 문자로 (/) 는 포함하지 않는다.
    - 하이픈(-) 은 가동성을 높이는데 사용한다. (띄어쓰기를 (-) 으로 대체하여 사용)
    - 언더바(_) 는 사용하지 않는다.
    - URI 경로에는 소문자가 적합하다.
    - 파일 확장자는 URI 에 포함하지 않는다.
    - 프로그래밍 언어에 의존적인 확장자를 사용하지 않는다.
    - 구현에 의존적인 경로를 사용하지 않는다. (ex. servlet)
    - 세션 ID 를 포함하지 않는다.
    - 프로그래밍 언어의 Method 명을 이용하지 않는다.
    - 명사에 단수형보다는 복수형을 사용한다. 컬렉션에 대한 표현은 복수로 사용.
    - 컨트롤러 이름으로는 동사나 동사구를 사용한다. (ex. /re-order)
    - 경로 중 변하는 부분은 유일한 값으로 대체한다.
    - CRUD 기능을 나타내는 것은 URI 에 사용하지 않는다. (GET, POST 등 메서드 형식을 통해 이미 알 수 있다.) (ex. .../users/100/**READ** (X))
    - URI 쿼리 부분으로 컬렉션 결과에 대해서 필터링 할 수 있다. (ex. .../curriculums/web?chapter=2)
    - URI 쿼리는 컬렉션의 결과를 페이지로 구분하여 나타내는데 사용한다. (ex. .../curriculums/web?chapter=2&page=0&size=10&sort=asc)
    - API 에 있어서 서브 도메인은 일관성 있게 사용해야 한다. (ex. https://api.**.co.kr)
    - 클라이언트 개발자 포탈 서브 도메인은 일관성 있게 만든다. (ex. https://dev-**.co.kr)

+ 메시지를 통한 리소스 조작
  - Web 에서 데이터 전달 방식 : HTML, XML, JSON, TEXT 등
  - 리소스 조작을 위해서 데이터 전체를 전달하지 않고 메시지로 전달한다. 

+ 자기서술적 메시지
  - 요청하는 데이터가 어떻게 처리 되어야 하는지 충분한 데이터를 포함할 수 있어야 한다.
  - HTTP 기반 REST 에서는 HTTP Method, Header 정보, URI 정보로 표현할 수 있다.


## HTTP Protocol

HTTP 는 Hyper Text Transfer Protocol 의 줄임말로 Web에서 데이터를 주고 받는 전송규약이다. Text, HTML, XML, JSON, Image, Voice, Video, Javascript, PDF 등 모두 전송할 수 있고, TCP 를 기반으로 한 **REST** 의 특징을 모두 구현하고 있는 Web 기반의 프로토콜이다.

- HTTP 의 요청을 특정하는 Method 는 8가지가 있다.


|  | 의미 | CRUD | 멱등성 | 안정성 | Path Variable | Query Parameter | DataBody |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|GET|리소스 취득|R|O|O|O|O|X|
|POST|리소스 생성, 추가|C|X|X|O|O/X|O|
|PUT|리소스 갱신, 생성|C/U|O|X|O|O/X|O|
|DELETE|리소스 삭제|D|O|X|O|O|X|
|HEAD|해당 데이터 취득|-|O|O|-|-|-|
|OPTIONS|지원하는 메소드 취득|-|O|-|-|-|-|
|TRACE|요청 메시지 반환|-|O|-|-|-|-|
|CONNECT|프록시 동작의 터널 접속으로 변경|-|X|-|-|-|-|

* 멱등성이란 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질을 나타낸다.



